# 人脸比对库对比（完全开源）

说明：本 README 汇总主流开源人脸识别/比对实现（含论文、官方/社区复现、轻量变体与实用封装），对比关键属性并给出可验证要点、最小可运行示例、工程化与部署建议，面向研究人员与工程工程师以支持复现、对比、部署与基准验证。所有陈述基于公开论文与对应仓库（参考末尾链接），具体命令与超参请以各仓库 README 为准。

## 一、对比一览（可直接复制）
| 项目 | 主要模型 / 方法 | 损失函数 | 常见训练集（实现中使用） | 嵌入维度 | 框架 / 语言 | 许可证 | 适用场景 |
|---|---|---|---|---:|---|---|---|
| InsightFace | ArcFace / IR-Backbone / ResNet / MobileFaceNet / MagFace 等 | ArcFace (AAM-Softmax)、MagFace、CosFace | MS1M-clean、VGGFace2、Glint360K（仓库说明/脚本可查） | 128 / 512 常见 | Python；MXNet / PyTorch 实现 | Apache-2.0 | 高精度服务端、研究复现、模型导出部署 |
| ArcFace（论文/复现） | IR-Backbone + ArcFace 损失 | ArcFace (Additive Angular Margin Softmax) | MS1M、VGGFace2 等 | 512 常见 | PyTorch / MXNet | 论文为学术发布，代码多 MIT/Apache | 研究/基准/高准确率 |
| FaceNet（复现） | Inception-ResNet / CNN + Triplet Loss | Triplet Loss | VGGFace2、MS1M 可用于复现 | 128 | TensorFlow / PyTorch | 多为 Apache/MIT | 低维检索、学术复现 |
| MobileFaceNet / 轻量模型 | MobileFaceNet / MobileNetV2 / ShuffleNet 变体 | ArcFace / AM-Softmax | MS1M 派生、VGGFace2 | 128 | PyTorch / TensorFlow | Apache-2.0 / MIT | 移动/边缘、实时推理 |
| face_recognition (ageitgey/dlib) | dlib 的 ResNet 嵌入（预训练） | metric-learning 风格训练（dlib） | 社区使用公开数据（VGGFace2 等） | 128 | Python（C++ dlib） | BSD | 快速原型、小规模部署 |

## 二、项目详述与可验证要点（面向研究复现）
InsightFace（deepinsight/insightface）：功能完整的识别工具箱，包含训练/评估/导出/部署脚本、model zoo 与多种 backbone 与损失；可核验点包括仓库中的 model zoo、train/eval/export 脚本、README 的数据准备说明（MS1M-clean/VGGFace2/Glint360K）、LICENSE（Apache-2.0）及 ONNX/TensorRT 导出示例；建议复现时运行仓库自带的 eval（LFW/IJB）以对比分数。ArcFace（Deng et al., 2019）：提出 Additive Angular Margin（AAM-Softmax），理论公式与基准（LFW/MegaFace）在论文中给出；可核验点为论文（arXiv/DOI）与多个复现（如 InsightFace）中的实现，损失函数规范式为 L = -1/N sum_i log( exp(s * cos(theta_{y_i}+m)) / (exp(s * cos(theta_{y_i}+m)) + sum_{j!=y_i} exp(s * cos(theta_j))) )，研究/基准场景常用。FaceNet（Schroff et al., 2015）：基于 Triplet Loss 学习 128-d 嵌入，原始训练数据为私有大规模集但社区多有复现，验证点为论文中 Triplet 采样策略与公开复现仓库，适合低维向量检索与学术复现。MobileFaceNet / 轻量模型：面向移动/边缘的轻量 backbone，通常与 ArcFace/AM-Softmax 一起训练以保判别性；可验证社区实现与权重并在轻量设备上进行量化试验。face_recognition（ageitgey/dlib）：Python 封装，基于 dlib 预训练 ResNet 输出 128-d 嵌入，适合快速原型与教学，验证点为仓库 README、dlib 模型说明与 BSD License。

## 三、最小可运行示例（官方 README 可直接运行）
1) face_recognition（快速原型，官方示例）：
```python
import face_recognition
image1 = face_recognition.load_image_file("person1.jpg")
encodings1 = face_recognition.face_encodings(image1)
image2 = face_recognition.load_image_file("person2.jpg")
encodings2 = face_recognition.face_encodings(image2)
from numpy import dot
from numpy.linalg import norm
cos_sim = dot(encodings1[0], encodings2[0]) / (norm(encodings1[0]) * norm(encodings2[0]))
print(cos_sim)
```
说明：该示例摘自官方 README，内部使用 dlib 的 128-d 嵌入。2) InsightFace（快速流程示例，仓库 README/脚本为准）：git clone https://github.com/deepinsight/insightface.git; cd insightface; pip install -r requirements.txt；按 README 准备数据（MS1M/VGGFace2/Glint360K）、运行 train.py（分布式多 GPU 支持）、eval.py（LFW/IJB 等），使用 export 脚本导出 ONNX/TorchScript（见仓库 docs）。3) ArcFace 复现验证：在 InsightFace 或其他复现仓库中启动训练与 eval 并对比仓库提供的 model zoo 分数以验证实现。

## 四、部署与工程化建议（可直接落地）
导出格式优先 ONNX / TorchScript（InsightFace 与复现均提供导出脚本）；推理加速：NVIDIA 平台使用 TensorRT（ONNX→TensorRT），x86/Intel 使用 ONNX Runtime / OpenVINO，移动端可转换为 TFLite 并做量化。移动/边缘优先选 MobileFaceNet 等轻量 backbone 并配合 FP16/INT8 量化、剪枝或蒸馏；线上比对建议预先计算并存储 embedding 于向量库（Faiss / HNSWlib / Annoy），索引前对 embedding 做 L2 正则化；存储估算：float32 每维 4 bytes（128-d ≈ 512 bytes，512-d ≈ 2048 bytes）；评估基准使用 LFW、IJB-C、MegaFace、AgeDB 等并确保与论文相同的数据清洗与预处理；训练注意数据清洗（去重、错误标签）、类不平衡与采样策略对精度影响显著；合规提示：人脸数据使用需遵守当地法律与数据集许可（本文不构成法律意见）。

## 五、推荐复现/验证工作流（研究人员友好）
选择目标：按精度/延迟/部署平台选 backbone（例如研究优先 ResNet-IR+ArcFace，工程/移动优先 MobileFaceNet）；获取代码与权重：克隆官方/社区仓库并下载 model zoo；准备数据：按仓库 README 清洗并组织 MS1M-clean / VGGFace2 / Glint360K；训练：使用官方 train 脚本（多 GPU、分布式）；评估：运行官方 eval（LFW/IJB）并对比给定基线；导出：ONNX/TorchScript；部署：在目标推理引擎（TensorRT/ONNX Runtime/OpenVINO）上性能调优，集成 Faiss/HNSWlib 做向量检索；记录：保存训练日志、超参、数据清单以确保可复现性。

## 六、参考链接（用于核验）
- InsightFace 仓库（主仓库）：https://github.com/deepinsight/insightface  
- ArcFace（Additive Angular Margin Softmax，论文）：https://arxiv.org/abs/1801.07698  
- FaceNet（Triplet Loss，论文）：https://arxiv.org/abs/1503.03832  
- face_recognition（ageitgey）：https://github.com/ageitgey/face_recognition  
- Glint360K（InsightFace recognition 目录说明）：https://github.com/deepinsight/insightface/tree/master/recognition  
- MobileFaceNet / 对齐工具示例：https://github.com/Tencent/FaceDetection-Alignment  
- Faiss（向量检索）：https://github.com/facebookresearch/faiss  
- ONNX Runtime：https://github.com/microsoft/onnxruntime  
- TensorRT：https://developer.nvidia.com/tensorrt
