## 余弦相似度 与 L2 距离

### 余弦相似度（cosine similarity）
- 定义要点：余弦相似度衡量的是两个向量的方向一致性，仅反映分量之间的相对比重，而不受向量总体长度（范数）的影响。常在语义或嵌入比对场景使用，以判断“模式/方向”是否相似。  
- 数值直观：同向时相似度最大（理论上为 1），正交时相似度为 0，反向时相似度为 -1；在仅含非负分量的正空间中，值通常位于 0 到 1 之间。  
- 优点（简要）：对统一缩放鲁棒；强调相对分布，适合高维稀疏嵌入；计算开销小，便于大规模检索。  
- 局限（简要）：忽略绝对幅值信息；对某些维度相对权重或系统性偏差敏感；当向量含有负值或方向信息重要时需谨慎解释。  
- 实务建议：若目标是比较语义/模式（如人脸嵌入、句向量），通常先做 L2 归一化再用余弦相似度进行检索或匹配，以保证比较只基于方向。

### L2 距离（欧氏距离）
- 定义要点：L2 距离量化两个向量在原始数值空间上的绝对差异，反映每个分量数值差的累积影响，既受方向也受范数影响。  
- 数值直观：距离越小表示两向量在数值意义上越接近；距离为 0 表示向量完全相等。  
- 优点（简要）：保留并反映绝对幅值信息，适合像素级、强度级或需衡量真实数值差异的场景；对单一分量的大偏差敏感，有利于捕捉显著差异。  
- 局限（简要）：对统一缩放不鲁棒（整体放大/缩小会改变距离）；在高维空间下范数效应可能降低判别性；对噪声或异常值更敏感。  
- 实务建议：当向量的绝对幅值承载实际信息（未归一化的特征、像素强度、物理量）或需精确度量数值差异时优先使用 L2。

---

🎯 选择速查（严谨版）  
- 比较“模式/方向/语义”且希望忽略尺度：对向量先做 L2 归一化，然后用余弦相似度。  
- 比较“绝对数值差异/幅值”且不归一化：用 L2 距离。  
- 兼顾两者：可同时计算余弦与 L2，并基于任务设定阈值或加权融合结果。

注意：在正式系统中应明确向量的含义、是否包含负值、以及是否已标准化，再据此选择度量与阈值。
